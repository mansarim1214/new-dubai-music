{"ast":null,"code":"// src/components/ManageMusicStore.js\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import EditMusicStore from\"./EditMusicStore\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManageMusicStore=()=>{const[stores,setStores]=useState([]);const[searchTerm,setSearchTerm]=useState(\"\");const[filteredStores,setFilteredStores]=useState([]);const[editStore,setEditStore]=useState(null);const[showAlert,setShowAlert]=useState(false);// Fetch music stores\nuseEffect(()=>{const fetchStores=async()=>{try{const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/musicstore\"));// Update endpoint\nsetStores(response.data);// Update state\n}catch(error){console.error(\"Error fetching music stores:\",error);}};fetchStores();},[]);// Filter music stores based on search term\nuseEffect(()=>{const filtered=stores.filter(store=>{return store.name&&store.name.toLowerCase().includes(searchTerm.toLowerCase())||store.contact&&store.contact.toLowerCase().includes(searchTerm.toLowerCase());});setFilteredStores(filtered);},[searchTerm,stores]);const handleSearchChange=e=>{setSearchTerm(e.target.value);};const handleSubmit=e=>{e.preventDefault();};// Delete store\nconst handleDelete=async id=>{const confirmed=window.confirm(\"Are you sure you want to delete this store?\");if(!confirmed)return;try{await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/musicstore/\").concat(id));// Update endpoint\nsetStores(stores.filter(store=>store._id!==id));// Update state\nsetShowAlert(true);}catch(error){console.error(\"Error deleting store:\",error);}};// Edit store\nconst handleEdit=store=>{setEditStore(store);};return/*#__PURE__*/_jsxs(\"div\",{className:\"stores\",children:[showAlert&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success alert-dismissible fade show\",role:\"alert\",children:[\"Action successful!\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",onClick:()=>setShowAlert(false),children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),editStore?/*#__PURE__*/_jsx(EditMusicStore,{store:editStore// Update props\n,setEditStore:setEditStore,setShowAlert:setShowAlert}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Manage Music Stores\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Entries: \",stores.length]}),\" \",/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group d-flex\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search by name or contact\"// Update placeholder\n,value:searchTerm,onChange:handleSearchChange})})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Contact\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Logo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredStores.map(store=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:store.name||\"No Name\"}),/*#__PURE__*/_jsx(\"td\",{children:store.contact||\"No Contact\"}),/*#__PURE__*/_jsx(\"td\",{children:store.status||\"No Status\"}),/*#__PURE__*/_jsx(\"td\",{children:store.logo?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API_URL,\"/\").concat(store.logo),alt:store.name,style:{width:\"50px\"}}):\"No Logo\"}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning mr-2\",onClick:()=>handleEdit(store),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleDelete(store._id),children:\"Delete\"})]})]},store._id))})]})]})]});};export default ManageMusicStore;","map":{"version":3,"names":["React","useEffect","useState","axios","EditMusicStore","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManageMusicStore","stores","setStores","searchTerm","setSearchTerm","filteredStores","setFilteredStores","editStore","setEditStore","showAlert","setShowAlert","fetchStores","response","get","concat","process","env","REACT_APP_API_URL","data","error","console","filtered","filter","store","name","toLowerCase","includes","contact","handleSearchChange","e","target","value","handleSubmit","preventDefault","handleDelete","id","confirmed","window","confirm","delete","_id","handleEdit","className","children","role","type","onClick","length","onSubmit","placeholder","onChange","map","status","logo","src","alt","style","width"],"sources":["D:/My Work/DubaiMusic/dubai-music/src/components/Dashboard/ManageStore.js"],"sourcesContent":["// src/components/ManageMusicStore.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport EditMusicStore from \"./EditMusicStore\"; \r\nconst ManageMusicStore = () => {\r\n  const [stores, setStores] = useState([]); \r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filteredStores, setFilteredStores] = useState([]); \r\n  const [editStore, setEditStore] = useState(null);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n\r\n  // Fetch music stores\r\n  useEffect(() => {\r\n    const fetchStores = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `${process.env.REACT_APP_API_URL}/api/musicstore`\r\n        ); // Update endpoint\r\n        setStores(response.data); // Update state\r\n      } catch (error) {\r\n        console.error(\"Error fetching music stores:\", error);\r\n      }\r\n    };\r\n\r\n    fetchStores();\r\n  }, []);\r\n\r\n  // Filter music stores based on search term\r\n  useEffect(() => {\r\n    const filtered = stores.filter((store) => {\r\n      return (\r\n        (store.name &&\r\n          store.name.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n\r\n        (store.contact &&\r\n          store.contact.toLowerCase().includes(searchTerm.toLowerCase()))\r\n      );\r\n    });\r\n    setFilteredStores(filtered);\r\n  }, [searchTerm, stores]);\r\n\r\n  const handleSearchChange = (e) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  // Delete store\r\n  const handleDelete = async (id) => {\r\n    const confirmed = window.confirm(\r\n      \"Are you sure you want to delete this store?\"\r\n    );\r\n    if (!confirmed) return;\r\n\r\n    try {\r\n      await axios.delete(\r\n        `${process.env.REACT_APP_API_URL}/api/musicstore/${id}`\r\n      ); // Update endpoint\r\n      setStores(stores.filter((store) => store._id !== id)); // Update state\r\n      setShowAlert(true);\r\n    } catch (error) {\r\n      console.error(\"Error deleting store:\", error);\r\n    }\r\n  };\r\n\r\n  // Edit store\r\n  const handleEdit = (store) => {\r\n    setEditStore(store);\r\n  };\r\n\r\n  return (\r\n    <div className=\"stores\">\r\n      {showAlert && (\r\n        <div\r\n          className=\"alert alert-success alert-dismissible fade show\"\r\n          role=\"alert\"\r\n        >\r\n          Action successful!\r\n          <button\r\n            type=\"button\"\r\n            className=\"close\"\r\n            onClick={() => setShowAlert(false)}\r\n          >\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {editStore ? (\r\n        <EditMusicStore\r\n          store={editStore} // Update props\r\n          setEditStore={setEditStore}\r\n          setShowAlert={setShowAlert}\r\n        />\r\n      ) : (\r\n        <>\r\n          <h3>Manage Music Stores</h3>\r\n          <p>Total Entries: {stores.length}</p> {/* Update label */}\r\n          <form onSubmit={handleSubmit} className=\"mb-3\">\r\n            <div className=\"form-group d-flex\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"Search by name or contact\" // Update placeholder\r\n                value={searchTerm}\r\n                onChange={handleSearchChange}\r\n              />\r\n            </div>\r\n          </form>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Contact</th>\r\n                <th>Status</th>\r\n                <th>Logo</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredStores.map((store) => (\r\n                <tr key={store._id}>\r\n                  <td>{store.name || \"No Name\"}</td>\r\n                  <td>{store.contact || \"No Contact\"}</td>\r\n                  <td>{store.status || \"No Status\"}</td>\r\n                  <td>\r\n                    {store.logo ? (\r\n                      <img\r\n                        src={`${process.env.REACT_APP_API_URL}/${store.logo}`}\r\n                        alt={store.name}\r\n                        style={{ width: \"50px\" }}\r\n                      />\r\n                    ) : (\r\n                      \"No Logo\"\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-warning mr-2\"\r\n                      onClick={() => handleEdit(store)}\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-danger\"\r\n                      onClick={() => handleDelete(store._id)}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageMusicStore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}