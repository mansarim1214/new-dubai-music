{"ast":null,"code":"import React,{useEffect,useState,Suspense}from\"react\";import axios from\"axios\";import Preloader from'./Preloader';import DOMPurify from\"dompurify\";import{useParams,useNavigate}from\"react-router-dom\";import{FaWhatsapp}from\"react-icons/fa\";// WhatsApp Icon\nimport\"./frontend.css\";// Lazy load the icons\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BsArrowLeftSquareFill=/*#__PURE__*/React.lazy(()=>import(\"react-icons/bs\").then(module=>({default:module.BsArrowLeftSquareFill})));const BsTelephone=/*#__PURE__*/React.lazy(()=>import(\"react-icons/bs\").then(module=>({default:module.BsTelephone})));const StoreDetail=()=>{const{id}=useParams();const navigate=useNavigate();const[store,setStore]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Handle back navigation\nconst handleBack=()=>{navigate(-1);// Navigate to the previous page\n};// Fetch store details\nuseEffect(()=>{const fetchStore=async()=>{try{const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/musicstore/\").concat(id));setStore(response.data);}catch(err){console.error(\"Error fetching store:\",err);setError(\"Failed to fetch store. Please try again later.\");}finally{setLoading(false);}};fetchStore();},[id]);// Add target=\"_blank\" and rel=\"noopener noreferrer\" to links\nconst addTargetToLinks=html=>DOMPurify.sanitize(html).replace(/<a /g,'<a target=\"_blank\" rel=\"noopener noreferrer\" ');// WhatsApp share URL\nconst whatsappShareUrl=\"https://api.whatsapp.com/send?text=Check out this: \".concat(window.location.href);if(loading){return/*#__PURE__*/_jsx(Preloader,{});// Show Preloader while loading data\n}if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"store-detail bg-custom\",children:error});if(!store)return/*#__PURE__*/_jsx(\"div\",{className:\"store-detail bg-custom\",children:\"No store found.\"});return/*#__PURE__*/_jsx(\"div\",{className:\"store-detail bg-custom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading Back Button...\"}),children:/*#__PURE__*/_jsx(\"span\",{onClick:handleBack,className:\"back-btn\",children:/*#__PURE__*/_jsx(BsArrowLeftSquareFill,{size:30,className:\"my-2\"})})}),store.featuredImage&&/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API_URL,\"/\").concat(store.featuredImage),alt:store.name,className:\"store-image mb-2\",style:{width:\"100%\",height:\"auto\"}}),/*#__PURE__*/_jsx(\"h1\",{children:store.name}),/*#__PURE__*/_jsx(\"div\",{id:\"description\",className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-7\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Bio\"}),store.bio&&/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:addTargetToLinks(store.bio)}}),/*#__PURE__*/_jsx(\"div\",{className:\"whatsapp-share my-5\",children:/*#__PURE__*/_jsxs(\"a\",{href:whatsappShareUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn btn-success\",children:[/*#__PURE__*/_jsx(FaWhatsapp,{}),\" Share with Friends\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5\",children:store.logo&&/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API_URL,\"/\").concat(store.logo),alt:\"\".concat(store.name,\" Logo\"),className:\"store-logo\",style:{width:\"100%\",height:\"auto\"}})})]})}),store.contact&&/*#__PURE__*/_jsxs(\"div\",{className:\"artistForm mt-3\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Contact Store\"}),/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading Call Button...\"}),children:/*#__PURE__*/_jsxs(\"a\",{href:\"tel:\".concat(store.contact),target:\"_blank\",rel:\"noreferrer\",className:\"btn btn-call\",children:[/*#__PURE__*/_jsx(BsTelephone,{}),\" Call Now\"]})})]})]})});};export default StoreDetail;","map":{"version":3,"names":["React","useEffect","useState","Suspense","axios","Preloader","DOMPurify","useParams","useNavigate","FaWhatsapp","jsx","_jsx","jsxs","_jsxs","BsArrowLeftSquareFill","lazy","then","module","default","BsTelephone","StoreDetail","id","navigate","store","setStore","loading","setLoading","error","setError","handleBack","fetchStore","response","get","concat","process","env","REACT_APP_API_URL","data","err","console","addTargetToLinks","html","sanitize","replace","whatsappShareUrl","window","location","href","className","children","fallback","onClick","size","featuredImage","src","alt","name","style","width","height","bio","dangerouslySetInnerHTML","__html","target","rel","logo","contact"],"sources":["D:/My Work/DubaiMusic/dubai-music/src/components/View/StoreDetail.js"],"sourcesContent":["import React, { useEffect, useState, Suspense } from \"react\";\r\nimport axios from \"axios\";\r\nimport Preloader from './Preloader'; \r\nimport DOMPurify from \"dompurify\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { FaWhatsapp } from \"react-icons/fa\"; // WhatsApp Icon\r\nimport \"./frontend.css\";\r\n\r\n// Lazy load the icons\r\nconst BsArrowLeftSquareFill = React.lazy(() =>\r\n  import(\"react-icons/bs\").then((module) => ({ default: module.BsArrowLeftSquareFill }))\r\n);\r\nconst BsTelephone = React.lazy(() =>\r\n  import(\"react-icons/bs\").then((module) => ({ default: module.BsTelephone }))\r\n);\r\n\r\nconst StoreDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [store, setStore] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Handle back navigation\r\n  const handleBack = () => {\r\n    navigate(-1); // Navigate to the previous page\r\n  };\r\n\r\n  // Fetch store details\r\n  useEffect(() => {\r\n    const fetchStore = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `${process.env.REACT_APP_API_URL}/api/musicstore/${id}`\r\n        );\r\n        setStore(response.data);\r\n      } catch (err) {\r\n        console.error(\"Error fetching store:\", err);\r\n        setError(\"Failed to fetch store. Please try again later.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStore();\r\n  }, [id]);\r\n\r\n  // Add target=\"_blank\" and rel=\"noopener noreferrer\" to links\r\n  const addTargetToLinks = (html) =>\r\n    DOMPurify.sanitize(html).replace(\r\n      /<a /g,\r\n      '<a target=\"_blank\" rel=\"noopener noreferrer\" '\r\n    );\r\n\r\n  // WhatsApp share URL\r\n  const whatsappShareUrl = `https://api.whatsapp.com/send?text=Check out this: ${window.location.href}`;\r\n\r\n  \r\n  if (loading) {\r\n    return <Preloader />; // Show Preloader while loading data\r\n  }\r\n  if (error) return <div className=\"store-detail bg-custom\">{error}</div>;\r\n  if (!store) return <div className=\"store-detail bg-custom\">No store found.</div>;\r\n\r\n  return (\r\n    <div className=\"store-detail bg-custom\">\r\n      <div className=\"container\">\r\n        {/* Back Button */}\r\n        <Suspense fallback={<div>Loading Back Button...</div>}>\r\n          <span onClick={handleBack} className=\"back-btn\">\r\n            <BsArrowLeftSquareFill size={30} className=\"my-2\" />\r\n          </span>\r\n        </Suspense>\r\n\r\n        {/* Featured Image */}\r\n        {store.featuredImage && (\r\n          <img\r\n            src={`${process.env.REACT_APP_API_URL}/${store.featuredImage}`}\r\n            alt={store.name}\r\n            className=\"store-image mb-2\"\r\n            style={{ width: \"100%\", height: \"auto\" }}\r\n          />\r\n        )}\r\n\r\n        <h1>{store.name}</h1>\r\n\r\n        <div id=\"description\" className=\"mt-3\">\r\n          <div className=\"row\">\r\n            {/* Store Bio */}\r\n            <div className=\"col-md-7\">\r\n              <h4>Bio</h4>\r\n              {store.bio && (\r\n                <div\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: addTargetToLinks(store.bio),\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              {/* WhatsApp Share Button */}\r\n              <div className=\"whatsapp-share my-5\">\r\n                <a\r\n                  href={whatsappShareUrl}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"btn btn-success\"\r\n                >\r\n                  <FaWhatsapp /> Share with Friends\r\n                </a>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Store Logo */}\r\n            <div className=\"col-md-5\">\r\n              {store.logo && (\r\n                <img\r\n                  src={`${process.env.REACT_APP_API_URL}/${store.logo}`}\r\n                  alt={`${store.name} Logo`}\r\n                  className=\"store-logo\"\r\n                  style={{ width: \"100%\", height: \"auto\" }}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contact Information */}\r\n        {store.contact && (\r\n          <div className=\"artistForm mt-3\">\r\n            <h1>Contact Store</h1>\r\n            <Suspense fallback={<div>Loading Call Button...</div>}>\r\n              <a\r\n                href={`tel:${store.contact}`}\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n                className=\"btn btn-call\"\r\n              >\r\n                <BsTelephone /> Call Now\r\n              </a>\r\n            </Suspense>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StoreDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}