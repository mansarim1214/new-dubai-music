{"ast":null,"code":"// src/components/Venues.js\nimport React,{useEffect,useState}from'react';import axios from'axios';// import { useNavigate } from 'react-router-dom';\n// import { CKEditor } from \"@ckeditor/ckeditor5-react\";\n// import ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport EditVenue from'./EditVenue';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManageVenue=()=>{const[venues,setVenues]=useState([]);const[searchTerm,setSearchTerm]=useState(\"\");const[filteredVenues,setFilteredVenues]=useState([]);const[editVenue,setEditVenue]=useState(null);const[showAlert,setShowAlert]=useState(false);// const navigate = useNavigate();\nuseEffect(()=>{const fetchVenues=async()=>{try{const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/venues\"));setVenues(response.data);}catch(error){console.error('Error fetching venues:',error);}};fetchVenues();},[]);useEffect(()=>{const filtered=venues.filter(venue=>{return venue.title&&venue.title.toLowerCase().includes(searchTerm.toLowerCase())||venue.category&&venue.category.toLowerCase().includes(searchTerm.toLowerCase())||venue.location&&venue.location.toLowerCase().includes(searchTerm.toLowerCase());});setFilteredVenues(filtered);},[searchTerm,venues]);const handleSearchChange=e=>{setSearchTerm(e.target.value);};const handleSubmit=e=>{e.preventDefault();};const handleDelete=async id=>{const confirmed=window.confirm(\"Are you sure you want to delete this venue?\");if(!confirmed)return;try{await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/venues/\").concat(id));setVenues(venues.filter(venue=>venue._id!==id));setShowAlert(true);}catch(error){console.error('Error deleting venue:',error);}};const handleEdit=venue=>{setEditVenue(venue);};return/*#__PURE__*/_jsxs(\"div\",{className:\"venues\",children:[showAlert&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success alert-dismissible fade show\",role:\"alert\",children:[\"Action successful!\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",onClick:()=>setShowAlert(false),children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),editVenue?/*#__PURE__*/_jsx(EditVenue,{venue:editVenue,setEditVenue:setEditVenue,setShowAlert:setShowAlert}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Manage Venues\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Entries: \",venues.length]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group d-flex\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Search by name, category, or location\",value:searchTerm,onChange:handleSearchChange})})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredVenues.map(venue=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:venue.title}),/*#__PURE__*/_jsx(\"td\",{children:venue.category}),/*#__PURE__*/_jsx(\"td\",{children:venue.location}),/*#__PURE__*/_jsx(\"td\",{children:venue.status}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning mr-2\",onClick:()=>handleEdit(venue),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleDelete(venue._id),children:\"Delete\"})]})]},venue._id))})]})]})]});};export default ManageVenue;","map":{"version":3,"names":["React","useEffect","useState","axios","EditVenue","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManageVenue","venues","setVenues","searchTerm","setSearchTerm","filteredVenues","setFilteredVenues","editVenue","setEditVenue","showAlert","setShowAlert","fetchVenues","response","get","concat","process","env","REACT_APP_API_URL","data","error","console","filtered","filter","venue","title","toLowerCase","includes","category","location","handleSearchChange","e","target","value","handleSubmit","preventDefault","handleDelete","id","confirmed","window","confirm","delete","_id","handleEdit","className","children","role","type","onClick","length","onSubmit","placeholder","onChange","map","status"],"sources":["D:/My Work/DubaiMusic/dubai-music/src/components/Dashboard/ManageVenue.js"],"sourcesContent":["// src/components/Venues.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n// import { useNavigate } from 'react-router-dom';\r\n// import { CKEditor } from \"@ckeditor/ckeditor5-react\";\r\n// import ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\nimport EditVenue from './EditVenue';\r\n\r\nconst ManageVenue = () => {\r\n  const [venues, setVenues] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [filteredVenues, setFilteredVenues] = useState([]);\r\n  const [editVenue, setEditVenue] = useState(null);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  // const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchVenues = async () => {\r\n      try {\r\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/venues`);\r\n        setVenues(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching venues:', error);\r\n      }\r\n    };\r\n\r\n    fetchVenues();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const filtered = venues.filter((venue) => {\r\n      return (\r\n        (venue.title && venue.title.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n        (venue.category && venue.category.toLowerCase().includes(searchTerm.toLowerCase())) ||\r\n        (venue.location && venue.location.toLowerCase().includes(searchTerm.toLowerCase()))\r\n      );\r\n    });\r\n    setFilteredVenues(filtered);\r\n  }, [searchTerm, venues]);\r\n\r\n  const handleSearchChange = (e) => {\r\n    setSearchTerm(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    const confirmed = window.confirm(\"Are you sure you want to delete this venue?\");\r\n    if (!confirmed) return;\r\n\r\n    try {\r\n      await axios.delete(`${process.env.REACT_APP_API_URL}/api/venues/${id}`);\r\n      setVenues(venues.filter((venue) => venue._id !== id));\r\n      setShowAlert(true);\r\n    } catch (error) {\r\n      console.error('Error deleting venue:', error);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (venue) => {\r\n    setEditVenue(venue);\r\n  };\r\n\r\n  return (\r\n    <div className=\"venues\">\r\n      {showAlert && (\r\n        <div\r\n          className=\"alert alert-success alert-dismissible fade show\"\r\n          role=\"alert\"\r\n        >\r\n          Action successful!\r\n          <button\r\n            type=\"button\"\r\n            className=\"close\"\r\n            onClick={() => setShowAlert(false)}\r\n          >\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {editVenue ? (\r\n        <EditVenue\r\n          venue={editVenue}\r\n          setEditVenue={setEditVenue}\r\n          setShowAlert={setShowAlert}\r\n        />\r\n      ) : (\r\n        <>\r\n          <h3>Manage Venues</h3>\r\n          <p>Total Entries: {venues.length}</p>\r\n\r\n          <form onSubmit={handleSubmit} className=\"mb-3\">\r\n            <div className=\"form-group d-flex\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"Search by name, category, or location\"\r\n                value={searchTerm}\r\n                onChange={handleSearchChange}\r\n              />\r\n            </div>\r\n          </form>\r\n\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Title</th>\r\n                <th>Category</th>\r\n                <th>Location</th>\r\n                <th>Status</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredVenues.map((venue) => (\r\n                <tr key={venue._id}>\r\n                  <td>{venue.title}</td>\r\n                  <td>{venue.category}</td>\r\n                  <td>{venue.location}</td>\r\n                  <td>{venue.status}</td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-warning mr-2\"\r\n                      onClick={() => handleEdit(venue)}\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-danger\"\r\n                      onClick={() => handleDelete(venue._id)}\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageVenue;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}