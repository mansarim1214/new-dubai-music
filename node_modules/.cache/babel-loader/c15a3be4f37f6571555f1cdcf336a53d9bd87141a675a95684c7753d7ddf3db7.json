{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import Preloader from\"./Preloader\";// Import Preloader component\nimport\"./frontend.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MusicStore=()=>{const[stores,setStores]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchData=async()=>{try{const response=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/musicstore\"));// Filter only published stores\nconst publishedStores=response.data.filter(store=>store.status===\"published\");setStores(publishedStores);// Set fetched stores to state\nsetLoading(false);// Set loading to false once data is fetched\n}catch(error){console.error(\"Error fetching data:\",error);setError(\"Failed to fetch stores. Please try again later.\");// Set error state if data fetch fails\nsetLoading(false);// Set loading to false in case of error as well\n}};fetchData();},[]);if(loading)return/*#__PURE__*/_jsx(Preloader,{});// Use the Preloader component\nif(error)return/*#__PURE__*/_jsx(\"div\",{className:\"bg-custom\",children:error});if(!stores||stores.length===0)return/*#__PURE__*/_jsx(\"div\",{className:\"bg-custom\",children:\"No store found.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-custom\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"my-2 fav-title\",children:\"Music Stores\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"storeGrid\",children:[\" \",stores.map(store=>/*#__PURE__*/_jsx(\"div\",{className:\"storeCard\",style:{textAlign:\"center\",padding:\"10px\"},children:/*#__PURE__*/_jsx(Link,{to:\"/music-store/\".concat(store._id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"storeImage\",children:[store.featuredImage&&/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_API_URL,\"/\").concat(store.featuredImage),alt:store.name,width:\"100%\",loading:\"lazy\"}),/*#__PURE__*/_jsx(\"div\",{className:\"storeContent\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"artTitle\",children:store.name})})]})})},store._id))]})})]});};export default MusicStore;","map":{"version":3,"names":["React","useEffect","useState","Link","axios","Preloader","jsx","_jsx","jsxs","_jsxs","MusicStore","stores","setStores","loading","setLoading","error","setError","fetchData","response","get","concat","process","env","REACT_APP_API_URL","publishedStores","data","filter","store","status","console","className","children","length","map","style","textAlign","padding","to","_id","featuredImage","src","alt","name","width"],"sources":["D:/My Work/DubaiMusic/dubai-music/src/components/View/MusicStore.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Preloader from \"./Preloader\"; // Import Preloader component\r\nimport \"./frontend.css\";\r\n\r\nconst MusicStore = () => {\r\n  const [stores, setStores] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `${process.env.REACT_APP_API_URL}/api/musicstore`\r\n        );\r\n        \r\n        // Filter only published stores\r\n        const publishedStores = response.data.filter(\r\n          (store) => store.status === \"published\"\r\n        );\r\n        \r\n        setStores(publishedStores);  // Set fetched stores to state\r\n        setLoading(false);  // Set loading to false once data is fetched\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n        setError(\"Failed to fetch stores. Please try again later.\");  // Set error state if data fetch fails\r\n        setLoading(false);  // Set loading to false in case of error as well\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  \r\n\r\n  if (loading) return <Preloader />; // Use the Preloader component\r\n  if (error) return <div className=\"bg-custom\">{error}</div>;\r\n  if (!stores || stores.length === 0) return <div className=\"bg-custom\">No store found.</div>;\r\n\r\n  return (\r\n    <div className=\"bg-custom\">\r\n      <h2 className=\"my-2 fav-title\">Music Stores</h2>\r\n      <div className=\"container-fluid\">\r\n        <div className=\"storeGrid\"> {/* Grid layout */} \r\n          {stores.map((store) => (\r\n            <div\r\n              key={store._id}\r\n              className=\"storeCard\"\r\n              style={{\r\n                textAlign: \"center\",\r\n                padding: \"10px\",\r\n              }}\r\n            >\r\n              <Link to={`/music-store/${store._id}`}>\r\n                <div className=\"storeImage\">\r\n                  {store.featuredImage && (\r\n                    <img\r\n                      src={`${process.env.REACT_APP_API_URL}/${store.featuredImage}`}\r\n                      alt={store.name}\r\n                      width=\"100%\"\r\n                      loading=\"lazy\"\r\n                    />\r\n                  )}\r\n                  <div className=\"storeContent\">\r\n                    <h4 className=\"artTitle\">{store.name}</h4>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MusicStore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}