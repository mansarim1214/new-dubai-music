{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{CKEditor}from\"@ckeditor/ckeditor5-react\";import ClassicEditor from\"@ckeditor/ckeditor5-build-classic\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddMusicStore=()=>{const[showAlert,setShowAlert]=useState(false);const[store,setStore]=useState({name:\"\",bio:\"\",contact:\"\",logo:\"\",featuredImage:\"\",status:\"draft\"// Default to draft\n});const handleChange=e=>{const{name,value}=e.target;setStore(prevState=>({...prevState,[name]:value}));};const handleFileChange=e=>{const{name}=e.target;setStore(prevState=>({...prevState,[name]:e.target.files[0]}));};const handleBioChange=(event,editor)=>{const data=editor.getData();setStore(prevState=>({...prevState,bio:data}));};const handleStatusToggle=()=>{setStore(prevState=>({...prevState,status:prevState.status===\"publish\"?\"draft\":\"publish\"}));};const handleSubmit=async e=>{e.preventDefault();const formData=new FormData();formData.append(\"name\",store.name);formData.append(\"bio\",store.bio);formData.append(\"status\",store.status);// Send status field\nformData.append(\"contact\",store.contact);if(store.logo){formData.append(\"logo\",store.logo);}if(store.featuredImage){formData.append(\"featuredImage\",store.featuredImage);}try{const response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/musicstore\"),formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});console.log(\"Music store saved successfully:\",response.data);setShowAlert(true);// Set showAlert to true on successful submission\n// Redirect or reset form if needed\nsetTimeout(()=>{setShowAlert(false);// Navigate or reset form if needed\n},3000);}catch(error){console.error(\"Error saving music store:\",error);// Handle error state or display error message to user\n}};return/*#__PURE__*/_jsxs(\"div\",{className:\"add-music-store\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add New Music Store\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Store Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:store.name,onChange:handleChange,required:true,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Store Bio\"}),/*#__PURE__*/_jsx(CKEditor,{editor:ClassicEditor,data:store.bio,onChange:handleBioChange,required:true,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Contact\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"contact\",value:store.contact,onChange:handleChange,required:true,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Logo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"logo\",onChange:handleFileChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Featured Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"featuredImage\",onChange:handleFileChange,className:\"form-control\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-switch\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"statusSwitch\",checked:store.status===\"publish\",onChange:handleStatusToggle// Update on change\n}),/*#__PURE__*/_jsx(\"label\",{className:\"slider\",htmlFor:\"statusSwitch\"}),/*#__PURE__*/_jsx(\"span\",{className:\"custom-switch-label\",children:store.status===\"publish\"?\"Published\":\"Draft\"})]})]}),showAlert&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success alert-dismissible fade show\",role:\"alert\",children:[\"Music store added successfully!\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"close\",onClick:()=>setShowAlert(false),children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\xD7\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-lg btn-dark mt-5\",children:\"Add Music Store\"})]})]});};export default AddMusicStore;","map":{"version":3,"names":["React","useState","axios","CKEditor","ClassicEditor","jsx","_jsx","jsxs","_jsxs","AddMusicStore","showAlert","setShowAlert","store","setStore","name","bio","contact","logo","featuredImage","status","handleChange","e","value","target","prevState","handleFileChange","files","handleBioChange","event","editor","data","getData","handleStatusToggle","handleSubmit","preventDefault","formData","FormData","append","response","post","concat","process","env","REACT_APP_API_URL","headers","console","log","setTimeout","error","className","children","onSubmit","encType","type","onChange","required","id","checked","htmlFor","role","onClick"],"sources":["D:/My Work/DubaiMusic/dubai-music/src/components/Dashboard/AddMusicStore.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { CKEditor } from \"@ckeditor/ckeditor5-react\";\r\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\r\n\r\nconst AddMusicStore = () => {\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [store, setStore] = useState({\r\n    name: \"\",\r\n    bio: \"\",\r\n    contact: \"\",\r\n    logo: \"\",\r\n    featuredImage: \"\",\r\n    status: \"draft\", // Default to draft\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setStore((prevState) => ({ ...prevState, [name]: value }));\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const { name } = e.target;\r\n    setStore((prevState) => ({ ...prevState, [name]: e.target.files[0] }));\r\n  };\r\n\r\n  const handleBioChange = (event, editor) => {\r\n    const data = editor.getData();\r\n    setStore((prevState) => ({ ...prevState, bio: data }));\r\n  };\r\n\r\n  const handleStatusToggle = () => {\r\n    setStore((prevState) => ({\r\n      ...prevState,\r\n      status: prevState.status === \"publish\" ? \"draft\" : \"publish\",\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"name\", store.name);\r\n    formData.append(\"bio\", store.bio);\r\n    formData.append(\"status\", store.status); // Send status field\r\n    formData.append(\"contact\", store.contact);\r\n\r\n    if (store.logo) {\r\n      formData.append(\"logo\", store.logo);\r\n    }\r\n\r\n    if (store.featuredImage) {\r\n      formData.append(\"featuredImage\", store.featuredImage);\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/api/musicstore`,\r\n        formData,\r\n        {\r\n          headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        }\r\n      );\r\n\r\n      console.log(\"Music store saved successfully:\", response.data);\r\n      setShowAlert(true); // Set showAlert to true on successful submission\r\n\r\n      // Redirect or reset form if needed\r\n      setTimeout(() => {\r\n        setShowAlert(false);\r\n        // Navigate or reset form if needed\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(\"Error saving music store:\", error);\r\n      // Handle error state or display error message to user\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"add-music-store\">\r\n      <h3>Add New Music Store</h3>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        encType=\"multipart/form-data\"\r\n        className=\"mt-3\"\r\n      >\r\n        <div className=\"form-group\">\r\n          <label>Store Name</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={store.name}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Store Bio</label>\r\n          <CKEditor\r\n            editor={ClassicEditor}\r\n            data={store.bio}\r\n            onChange={handleBioChange}\r\n            required\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label>Contact</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"contact\"\r\n            value={store.contact}\r\n            onChange={handleChange}\r\n            required\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Logo</label>\r\n          <input\r\n            type=\"file\"\r\n            name=\"logo\"\r\n            onChange={handleFileChange}\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Featured Image</label>\r\n          <input\r\n            type=\"file\"\r\n            name=\"featuredImage\"\r\n            onChange={handleFileChange}\r\n            className=\"form-control\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label>Status</label>\r\n          <div className=\"custom-switch\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id=\"statusSwitch\"\r\n              checked={store.status === \"publish\"}\r\n              onChange={handleStatusToggle} // Update on change\r\n            />\r\n            <label className=\"slider\" htmlFor=\"statusSwitch\"></label>\r\n            <span className=\"custom-switch-label\">\r\n              {store.status === \"publish\" ? \"Published\" : \"Draft\"}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {showAlert && (\r\n          <div\r\n            className=\"alert alert-success alert-dismissible fade show\"\r\n            role=\"alert\"\r\n          >\r\n            Music store added successfully!\r\n            <button\r\n              type=\"button\"\r\n              className=\"close\"\r\n              onClick={() => setShowAlert(false)}\r\n            >\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        <button type=\"submit\" className=\"btn btn-lg btn-dark mt-5\">\r\n          Add Music Store\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddMusicStore;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}